(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1224:function(e,t,r){},1228:function(e,t,r){},1230:function(e,t,r){},1232:function(e,t,r){},1248:function(e,t){},1250:function(e,t){},1284:function(e,t){},1285:function(e,t){},1360:function(e,t,r){},1362:function(e,t,r){},1365:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),u=r(139),o=r.n(u),c=r(1366),i=(r(160),r(140)),s=r(141),l=r(152),m=r(142),d=r(153),p=r(1368),f=r(1),h=r(2),v=r.n(h),b=r(3),E=r(77),g=r(151);E.a.plugin(g.a);var y,w,k,x=new E.a("stp-logbook",{auto_compaction:!0}),q=r(23),C=r.n(q),N=r(143),j=r.n(N),F=r(31),O=r.n(F),_=function(){return Math.round(1e9*Math.random()).toString(16)},A=function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y=[{_id:_(),type:"aircraft",name:"Caravan-FL",tailNumber:"N123FL"},{_id:_(),type:"aircraft",name:"Caravan-DZ",tailNumber:"N420DZ"},{_id:_(),type:"aircraft",name:"Otter-BA",tailNumber:"N832BA"},{_id:_(),type:"aircraft",name:"King Air-XZ",tailNumber:"N123XZ"}],e.abrupt("return",y);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w=Array.from(Array(5)).map(function(e){return{_id:_(),type:"instructor",name:"".concat(C.a.name.firstName()," ").concat(C.a.name.lastName()),email:C.a.internet.email(),phone:C.a.phone.phoneNumberFormat()}}),e.abrupt("return",w);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),S=function(e,t){return new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()))},I=function(){var e={_id:_(),type:"student",name:"".concat(C.a.name.firstName()," ").concat(C.a.name.lastName()),email:C.a.internet.email(),phone:C.a.phone.phoneNumberFormat(),instructor:w[Math.round(Math.random()*(w.length-1))].name,previousJumps:Math.floor(3*Math.random())+2,jumps:[]};return e.jumps=function(e){var t=e.previousJumps,r=e.studentId,n=S(new Date(2018,0,1),new Date),a=S(n,new Date),u=j()(n,a),o=Math.round(18*Math.random()),c=u[0],i=Array.from(Array(o)).map(function(e,n){var u=S(c,a);c=u;var o={_id:_(),type:"jump",studentId:r,number:t+n,diveFlow:n+1,date:O()(u),instructor:w[Math.round(Math.random()*(w.length-1))].name,aircraft:y[Math.round(Math.random()*(y.length-1))].name,exitAltitude:1e4+500*Math.round(10*Math.random()),deploymentAltitude:[3500,4e3,4500,5e3,5500,6e3][Math.round(6*Math.random())],exit:C.a.lorem.sentences(),freefall:C.a.lorem.sentences(),canopy:C.a.lorem.sentences(),notes:C.a.lorem.sentences()};return o.freefallTime=Math.ceil((o.exitAltitude-o.deploymentAltitude)/1e3*5.5),o});return x.bulkDocs(i).then(function(e){return console.debug(e)}),i}({previousJumps:e.previousJumps,studentId:e._id}).map(function(e){return e._id}),e},B=function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k=Array.from(Array(50)).map(function(e){return I()}),e.abrupt("return",k);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("createTestData"),e.next=3,A();case 3:return y=e.sent,x.bulkDocs(y).then(function(e){return console.debug(e)}),e.next=7,D();case 7:return w=e.sent,x.bulkDocs(w).then(function(e){return console.debug(e)}),e.next=11,B();case 11:return k=e.sent,x.bulkDocs(k).then(function(e){return console.debug(e)}),console.groupEnd("createTestData"),e.abrupt("return",{aircraft:y,instructors:w,students:k});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),J={fields:["type","studentId"]},R=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("initializeDatabase"),console.debug(x),e.next=4,x.createIndex({index:J});case 4:return t=e.sent,console.debug("Creating index:",J,t.result),e.next=8,x.find({selector:{type:"student"}}).then(function(e){if(0===e.docs.length)return M();console.groupEnd("initializeDatabase")});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),T=(r(1224),r(10)),P=(r(1228),function(e){var t,r=e.type,n=e.message;return"object"===typeof n&&(t=a.a.createElement("ul",null,n.map(function(e,t){return a.a.createElement("li",{key:t},e.message)}))),a.a.createElement("div",{className:"flash ".concat(r)},t||n)}),K=function(e){return a.a.createElement("button",{id:e.id,onClick:e.onClick,className:"d"===e.id&&f.store.deleteConfirmation?"header-button warning":"header-button"},e.children)},L=function(e){var t=e.buttons;return a.a.createElement(a.a.Fragment,null,a.a.createElement("nav",{className:"Header"},t.map(function(e,t){var r=e.children;return a.a.createElement(K,Object.assign({key:t},e),r)})),a.a.createElement($,null))},$=function(){var e=f.store.flash,t=e.type,r=e.message;return a.a.createElement("div",{className:"Messages"},a.a.createElement(P,{type:t,message:r}))};r(1230);f.store.deleteConfirmation=!1,x.find({selector:{type:"aircraft"}}).then(function(e){return e.docs}).then(function(e){return f.store.aircraftCount=e.length}),x.find({selector:{type:"instructor"}}).then(function(e){return e.docs}).then(function(e){return f.store.instructorCount=e.length}),x.find({selector:{type:"student"}}).then(function(e){return e.docs}).then(function(e){return f.store.studentCount=e.length});var V=Object(f.collect)(function(e){var t=e.history,r=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.store.deleteConfirmation){e.next=10;break}return e.next=3,M();case 3:return t=e.sent,console.log(t),f.store.aircraftCount=t.aircraft.length,f.store.instructorCount=t.instructors.length,f.store.studentCount=t.students.length,f.store.deleteConfirmation=!1,e.abrupt("return",null);case 10:f.store.deleteConfirmation=!0;case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return 0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"s",onClick:function(){return t.push("/students")},children:"Students"},{id:"i",onClick:function(){return t.push("/instructors")},children:"Instructors"},{id:"a",onClick:function(){return t.push("/aircraft")},children:"Aircraft"}]),a.a.createElement(a.a.Fragment,null,a.a.createElement(L,{buttons:f.store.headerButtons}),a.a.createElement(T.a,{keyName:"ctrl+s,ctrl+i,ctrl+a",onKeyDown:function(e,t,r){document.getElementById(e.match(/.$/)).click()}},a.a.createElement("div",{className:"Home Content"},a.a.createElement("section",null,a.a.createElement("h1",null,a.a.createElement("strong",null,a.a.createElement("code",null,"stp-logbook"))," ","is a work in progress."),a.a.createElement("p",null,a.a.createElement("strong",null,a.a.createElement("code",null,"stp-logbook"))," ","will help skydive instructors log their students' jumps in an efficient manner by providing clever shortcuts to typing common log entry phrases."),a.a.createElement("p",null,"With a quick glance, instructors can determine when students are approaching uncurrency, when their last jump was, which dive flow it was, and which instructor they were with."),a.a.createElement("p",null,a.a.createElement("strong",null,a.a.createElement("code",null,"stp-logbook"))," ",'is largely navigable via keyboard shortcuts. Buttons which are keyboard accessible have labels with the first letter highlighted. To "click" the button, type'," ",a.a.createElement("strong",null,a.a.createElement("code",null,"ctrl+[letter]")),"."),a.a.createElement("p",null,a.a.createElement("strong",null,a.a.createElement("code",null,"stp-logbook"))," ","is under active development since Tuesday, November 6th 2018, and it's still got a long way to go."),a.a.createElement("p",null,"Planned features include:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("strong",null,a.a.createElement("em",null,"Phrase Cloud"))," ","log entry text creation. Rather than typing, select common log entry phrases from a collection of common phrases."),a.a.createElement("li",null,a.a.createElement("strong",null,"Backend Integration")," will be needed for storing and editing of videos as well as syncronization of data between clients. Duh."),a.a.createElement("li",null,a.a.createElement("strong",null,a.a.createElement("em",null,"Drag and Drop Video"))," ","management. Drag your student's video directly from your SD card to the student's log entry."),a.a.createElement("li",null,a.a.createElement("strong",null,a.a.createElement("em",null,"Video Trimming"))," ","capability. Trim the video to remove unwanted plane and instructor canopy content."),a.a.createElement("li",null,a.a.createElement("strong",null,a.a.createElement("em",null,"Printer Friendly Output"))," ","so the student has a record of their jumps."))),a.a.createElement("section",null,a.a.createElement("details",null,a.a.createElement("summary",null,"Fake Data For Testing"),a.a.createElement("div",{className:"warning"},a.a.createElement("h3",null,"Warning"),a.a.createElement("p",null,"Using this feature will ",a.a.createElement("strong",null,"COMPLETELY")," overwrite any data you have created. The data is stored locally in your browser, so it's not the end of the world if you fuck it up, though. Just sayin'. That said, feel free to create some fake data!")),a.a.createElement("table",null,a.a.createElement("caption",null,"Current Data"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Data Type"),a.a.createElement("th",null,"Count"))),a.a.createElement("tbody",null,a.a.createElement("tr",{onClick:function(){return t.push("/aircraft")}},a.a.createElement("td",null,"Aircraft"),a.a.createElement("td",null,f.store.aircraftCount)),a.a.createElement("tr",{onClick:function(){return t.push("/instructors")}},a.a.createElement("td",null,"Instructors"),a.a.createElement("td",null,f.store.instructorCount)),a.a.createElement("tr",{onClick:function(){return t.push("/students")}},a.a.createElement("td",null,"Students"),a.a.createElement("td",null,f.store.studentCount)))),0===f.store.studentCount?a.a.createElement("button",{className:f.store.deleteConfirmation?"warning":null,onClick:r},"Create Test Data"):a.a.createElement("button",{className:f.store.deleteConfirmation?"warning":null,onClick:function(){return f.store.deleteConfirmation?(x.destroy().then(function(e){return console.log("Deleted 'stp-logbook'",e)}),f.store.aircraftCount=0,f.store.instructorCount=0,f.store.studentCount=0,f.store.deleteConfirmation=!1,null):(f.store.deleteConfirmation=!0,null)}},"Delete Test Data"))))))}),Q=r(1367),U=r(40),z=r(12),Z=r.n(z),H=r(144),Y=r.n(H),W=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(U.a)(t.jumps).pop()){e.next=4;break}return console.warn("Missing jump._id for student",t._id,t),e.abrupt("return",[]);case 4:return e.next=6,x.get(r).then(function(e){return[e]}).catch(function(e){return console.warn(e),[]});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(v.a.mark(function e(){var t,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("getStudents"),e.next=3,x.find({selector:{type:"student"}});case 3:return t=e.sent,e.next=6,Promise.all(t.docs.map(function(){var e=Object(b.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return t.jumps=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 6:return r=e.sent,console.groupEnd("getStudents"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),G=Object(f.collect)(function(e){e.match;var t=e.history,r=f.store.students,n=f.store.filteredStudents,u=f.store.filter;f.store.student=null,f.store.jumps=null,f.store.activeJumpRow=-1,0===r.length&&Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:(t=e.sent).sort(function(e,t){var r=Object(U.a)(e.jumps).pop()||{date:new Date(1971,9,25)},n=Object(U.a)(t.jumps).pop()||{date:new Date(1971,9,25)};return Z()(n.date)-Z()(r.date)}),f.store.students=t,f.store.filteredStudents=t;case 6:case"end":return e.stop()}},e,this)}))();var o=n.length;return o>0&&f.store.activeStudentRow===o&&(f.store.activeStudentRow=0),o>0&&-1===f.store.activeStudentRow&&(f.store.activeStudentRow=o-1),0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"h",onClick:function(){return t.push("/")},children:"Home"},{id:"a",onClick:function(){return t.push("/students/new")},children:"Add Student"}]),a.a.createElement(T.a,{keyName:"down,j,up,k,enter,right,ctrl+h,ctrl+a",onKeyDown:function(e,r,a){if("submit"===r.srcElement.type&&"enter"===e)return!0;if(void 0!==r.srcElement.type)return!1;switch(!0){case["down","j"].includes(e):f.store.activeStudentRow++;break;case["up","k"].includes(e):f.store.activeStudentRow--;break;case["enter","right"].includes(e):t.push("/students/".concat(n[f.store.activeStudentRow]._id));break;default:document.getElementById(e.match(/.$/)).click()}}},a.a.createElement("div",{className:"Content"},a.a.createElement("table",{id:"students"},a.a.createElement("caption",null,"Students"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null," ",a.a.createElement("input",{onChange:function(e){var t=e.target.value.toLowerCase();f.store.filteredStudents=f.store.students.filter(function(e){return e.name.toLowerCase().match(t)}),f.store.filter=e.target.value},value:u,placeholder:"Filter by name"})),a.a.createElement("th",null,"Last Jump"),a.a.createElement("th",null,"Last DiveFlow"))),a.a.createElement("tbody",{tabIndex:0},n.map(function(e,r){var n=e.jumps[e.jumps.length-1],u=n?Y()(new Date,n.date):9999,o=n?"".concat(O()(n.date,"ddd MMM Do")):null,c=n?"DF ".concat(n.diveFlow," - ").concat(Object(U.a)(n.instructor.match(/(\w+) ([A-Z])/)[0]).join(""),"."):null;return a.a.createElement("tr",{key:r,onClick:function(){return function(e){t.push("/students/".concat(e._id))}(e)},className:r===f.store.activeStudentRow?"active":""},a.a.createElement("td",null,e.name),a.a.createElement("td",null,o,a.a.createElement("span",{className:"currency-color",style:{backgroundColor:"".concat(function(e){return e>30?"rgb(255, 0, 0)":e>21?"rgb(255, ".concat(192-Math.floor(64/7*(e-21)),", 0)"):e>14?"rgb(255, ".concat(255-Math.floor(64/7*(e-14)),", 0)"):"rgb(".concat(Math.floor(255/14*e),", 255, 0)")}(u))}})),a.a.createElement("td",null,c))})))))}),ee=r(154),te=(r(1232),r(145)),re=r.n(te),ne=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get(t);case 2:return r=e.sent,console.debug("getStudent",r),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.allDocs({keys:t.jumps,include_docs:!0});case 2:return r=e.sent,console.debug("getJumps",r),e.abrupt("return",r.rows.map(function(e){return e.doc}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ue=r(146),oe=r.n(ue),ce=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.group("saveStudent"),!(r=oe()(t)).error){e.next=4;break}return e.abrupt("return",{error:r.error.details});case 4:if(!t._rev){e.next=8;break}return e.abrupt("return",x.get(t._id).then(function(e){return console.debug("get",e),t._rev=e._rev,x.put(t).then(function(e){return console.debug("put",e),console.groupEnd("saveStudent"),e})}));case 8:return e.abrupt("return",x.put(t).then(function(e){return console.debug("put",e),console.groupEnd("saveStudent"),e}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ie=r(147),se=r.n(ie),le=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.group("saveJump"),!(r=se()(t)).error){e.next=4;break}return e.abrupt("return",{error:r.error.details});case 4:if(!t._rev){e.next=8;break}return e.abrupt("return",x.get(t._id).then(function(e){return console.debug("saveJump existing get",e),t._rev=e._rev,x.put(t).then(function(e){return console.debug("saveJump existing put",e),console.groupEnd("saveJump"),e})}));case 8:return e.abrupt("return",x.put(t).then(function(e){return console.debug("saveJump new put",e),console.groupEnd("saveJump"),e}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),me=r(1).store,de=function(e){var t=Object.keys(e)[0],r=e[t];me.flash={type:t,message:r},setTimeout(function(){me.flash={type:"",message:""}},1e4)};f.store.activeJumpRow=-1;var pe=Object(f.collect)(function(e){var t=e.match,r=e.history;delete f.store.jump;var n=f.store.student,u=f.store.jumps;if(!n||n._id!==t.params.studentId)return Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t.params.studentId);case 2:return e.abrupt("return",f.store.student=e.sent);case 3:case"end":return e.stop()}},e,this)}))(),null;if(!u)return Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(n);case 2:return e.abrupt("return",f.store.jumps=e.sent);case 3:case"end":return e.stop()}},e,this)}))(),null;var o=n.jumps.length,c=function(){var e=u[u.length-1],t=e?Object(ee.a)({},e):{number:Number(n.previousJumps),diveFlow:0,instructor:n.instructor,aircraft:"-"},r=t.number,a=t.diveFlow,o=t.instructor,c=t.aircraft;return{_id:Math.round(1e9*Math.random()).toString(16),type:"jump",studentId:n._id,number:r+1,diveFlow:a+1,date:O()(new Date),instructor:o,aircraft:c,exitAltitude:14e3,deploymentAltitude:5e3,freefallTime:0}},i=function(){var e=Object(b.a)(v.a.mark(function e(){var t,a,u;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("addJump"),t=c(),e.next=4,le(t);case 4:if(!(a=e.sent).error){e.next=7;break}return e.abrupt("return",de(a));case 7:return n.jumps.push(t._id),e.next=10,ce(n);case 10:if(!(u=e.sent).error){e.next=13;break}return e.abrupt("return",de(u));case 13:de({success:"Saved jump ".concat(t._id)}),f.store.activeJumpRow++,delete f.store.jumps,console.groupEnd("addJump"),r.push("/students/".concat(n._id,"/jump/").concat(t._id));case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return o>0&&f.store.activeJumpRow===o&&(f.store.activeJumpRow=0),o>0&&-1===f.store.activeJumpRow&&(f.store.activeJumpRow=o-1),0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"b",onClick:function(){return r.push("/students")},children:"Back"},{id:"a",onClick:i,children:"Add Jump"},{id:"e",onClick:function(){return r.push("/students/".concat(n._id,"/edit"))},children:"Edit Student"}]),a.a.createElement(T.a,{keyName:"down,j,up,k,enter,right,left,ctrl+l,ctrl+b,ctrl+a,ctrl+e",onKeyUp:function(e,t,a){if("submit"===t.srcElement.type&&"enter"===e)return t.srcElement.click();if(void 0!==t.srcElement.type)return!1;switch(!0){case["down","j"].includes(e):f.store.activeJumpRow++;break;case["up","k"].includes(e):f.store.activeJumpRow--;break;case["enter","right"].includes(e):r.push("/students/".concat(n._id,"/jump/").concat(u[f.store.activeJumpRow]._id));break;case"left"===e:r.push("/students");break;default:document.getElementById(e.match(/.$/)).click()}}},a.a.createElement("div",{className:"Content"},a.a.createElement("div",{className:"show student"},a.a.createElement("div",null,n.name),a.a.createElement("div",null,n.email),a.a.createElement("div",null,n.phone)),a.a.createElement("table",{tabIndex:0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Jump - Dive Flow"),a.a.createElement("th",null,"Date"),a.a.createElement("th",null,"Instructor"))),a.a.createElement("tbody",null,u.map(function(e,t){return a.a.createElement("tr",{key:t,onClick:function(){return r.push("/students/".concat(n._id,"/jump/").concat(e._id))},className:t===f.store.activeJumpRow?"active":""},a.a.createElement("td",null,"Jump ",e.number," - DF ",e.diveFlow),a.a.createElement("td",null,O()(e.date,"dddd MMMM Mo")," (",re()(e.date),")"),a.a.createElement("td",null,e.instructor))})))))}),fe=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.find({selector:{type:"instructor"}});case 2:return t=e.sent,e.abrupt("return",t.docs);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),he=function(e){var t;switch(!0){case/^\d{4}/.test(e):t=e.replace(/^(\d{3})(\d{1})/,"$1-$2");break;case/^\d{3}-\d{4}/.test(e):t=e.replace(/^(\d{3}-\d{3})(\d{1})/,"$1-$2");break;default:t=e}return t},ve=r(32),be=r.n(ve),Ee=function(){for(var e=document.getElementsByClassName("formField error");e[0];)e[0].classList.remove("error")},ge={_id:Math.round(Math.random()*Math.pow(2,32)).toString(16),type:"student",name:"",email:"",phone:"",instructor:"",previousJumps:2,jumps:[]},ye=Object(f.collect)(function(e){var t=e.match,r=e.history,n=f.store.student,u=f.store.instructors;n||"/students/new"!==t.path||(f.store.student=ge),"/students/:studentId/edit"!==t.path||n&&n._id===t.params.studentId||Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t.params.studentId);case 2:return e.abrupt("return",f.store.student=e.sent);case 3:case"end":return e.stop()}},e,this)}))(),0===u.length&&Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:t=e.sent,f.store.instructors=t;case 4:case"end":return e.stop()}},e,this)}))();var o=function(e){var t=e.target,r=t.id,a=t.value;switch(r){case"phone":n[r]=he(a);break;default:n[r]=a}},c=function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(document.querySelector("input[type='submit']").click(),t.preventDefault()),Ee(),e.next=4,ce(n);case 4:if(!(a=e.sent).error){e.next=8;break}return de({error:"Please check form for errors."}),e.abrupt("return",be()(a.error));case 8:de({success:"Saved ".concat(n.name)}),r.push("/students/".concat(n._id));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();if(!n||0===u.length)return null;return 0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"l",onClick:function(){return r.push("/students")},children:"List Students"},{id:"b",onClick:function(){return r.goBack(1)},children:"Back"},{id:"s",onClick:c,children:"Save Student"}]),a.a.createElement(T.a,{keyName:"ctrl+l,ctrl+b,ctrl+s",onKeyDown:function(e,t,r){if("submit"===t.srcElement.type&&"enter"===e)return t.srcElement.children[0].click();document.getElementById(e.match(/.$/)).click()}},a.a.createElement("div",{className:"Content"},a.a.createElement("form",{onSubmit:c},a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Editing"," ",n.name?n.name:"New Student (id:".concat(n._id,")")),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"name"},"Name"),a.a.createElement("input",{id:"name",onChange:o,value:n.name,placeholder:"Full Name",className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"email"},"Email"),a.a.createElement("input",{id:"email",onChange:o,value:n.email,type:"email",placeholder:"email@domain.com",className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"phone"},"Phone"),a.a.createElement("input",{id:"phone",onChange:o,value:n.phone,type:"tel",placeholder:"123-456-7890",pattern:"\\d{3}-\\d{3}-\\d{4}",className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"instructor"},"Instructor"),a.a.createElement("select",{id:"instructor",value:n.instructor,onChange:o,className:"formField required",required:!0},a.a.createElement("option",{value:""},"Select Instructor"),a.a.createElement(we,{instructors:u}))),0===n.jumps.length?a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"previousJumps"},"Previous Jumps"),a.a.createElement("input",{type:"number",id:"previousJumps",onChange:o,value:n.previousJumps,className:"formField required",required:!0})):null),a.a.createElement("input",{type:"submit",style:{display:"none"}}))))}),we=function(e){return e.instructors.map(function(e,t){return a.a.createElement("option",{key:t,value:e.name},e.name)})},ke=(r(1360),r(1362),r(51)),xe=function(e){var t=e.setAttribute,r=e.store;if(!r.phraseCloudKey)return null;var n,u=function(e){e&&e.stopPropagation&&e.stopPropagation();var n=r.phraseCloudSelections[r.phraseCloudKey],a=e.target.attributes["data-key"].value;n.includes(a)?n.splice(n.indexOf(a),1):n.push(a);var u=n.map(function(e){return ke[r.phraseCloudKey][e]}).join(" ");t({target:{id:r.phraseCloudKey,value:u}})},o=function(e){"outer"===e.target.getAttribute("class")&&document.querySelector("#PhraseCloud").classList.toggle("hidden")};return a.a.createElement(T.a,{onKeyUp:function(e,t,r){if(document.querySelector("#PhraseCloud").classList.contains("hidden"))return null;switch(!0){case"ctrl+enter"===e:o();break;default:u({target:{attributes:{"data-key":{value:e}}}})}},keyName:Array.from(Array(26)).map(function(e,t){return String.fromCharCode(t+97)}).join(",")+",ctrl+enter"},a.a.createElement("div",{id:"PhraseCloud",className:"outer hidden",onClick:o},a.a.createElement("div",{className:"inner",onClick:null},a.a.createElement("h2",null,(n=r.phraseCloudKey).charAt(0).toUpperCase()+n.slice(1)," Phrases"," ",a.a.createElement("small",null,"Click a phrase or press the label key to move to/from target area. Click anywhere else or press [esc] to close.")),a.a.createElement("ul",{id:"target"},a.a.createElement(qe,{handlePhraseClick:u,store:r})),a.a.createElement("ul",{id:"source"},a.a.createElement(Ce,{handlePhraseClick:u,store:r})))))},qe=function(e){var t=e.handlePhraseClick,r=e.store;return r.phraseCloudSelections[r.phraseCloudKey].map(function(e){return a.a.createElement("li",{key:e,"data-key":e,onClick:t},ke[r.phraseCloudKey][e])})},Ce=function(e){var t=e.handlePhraseClick,r=e.store;return Object.keys(ke[r.phraseCloudKey]).map(function(e){return a.a.createElement("li",{key:e,"data-key":e,onClick:t,className:r.phraseCloudSelections[r.phraseCloudKey].includes(e)?"selected":null},ke[r.phraseCloudKey][e])})},Ne=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.find({selector:{type:"aircraft"}});case 2:return t=e.sent,e.abrupt("return",t.docs);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();f.store.phraseCloudKey="exit",f.store.phraseCloudSelections={exit:[],freefall:[],canopy:[]};var je=Object(f.collect)(function(e){var t=e.match,r=e.history,n=f.store.student,u=f.store.jump,o=f.store.instructors,c=f.store.aircraft;if(!n||!u)return Object(b.a)(v.a.mark(function e(){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.next=3,ne(t.params.studentId);case 3:f.store.student=e.sent;case 4:if(!n||u){e.next=9;break}return e.next=7,ae(f.store.student);case 7:r=e.sent,f.store.jump=r.find(function(e){return e._id===t.params.jumpId});case 9:case"end":return e.stop()}},e,this)}))(),null;if(0===o.length)return Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:f.store.instructors=e.sent;case 3:case"end":return e.stop()}},e,this)}))(),null;if(0===c.length)return Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:f.store.aircraft=e.sent;case 3:case"end":return e.stop()}},e,this)}))(),null;var i=function(e){var t=e.target,r=t.id,n=t.value;["diveFlow","jumpNumber","exitAltitude","deploymentAltitude","freefallTime"].includes(r)&&(n=Number(n)),u[r]=n,u.freefallTime=Math.ceil((u.exitAltitude-u.deploymentAltitude)/1e3*5.5)},s=function(e){if(e.key&&"enter"!==e.key.toLowerCase())return!0;var t=e.target.attributes.for.value.replace(/-hidden$/,"");return f.store.phraseCloudKey=t,document.querySelector("#PhraseCloud").classList.toggle("hidden"),!0},l=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ee(),e.next=3,le(u);case 3:if(!(r=e.sent).error){e.next=7;break}return de({error:r.error}),e.abrupt("return",be()(r.error));case 7:return de({success:"Saved ".concat(u._id)}),delete f.store.jumps,e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.jumps.splice(n.jumps.indexOf(u._id),1),Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(n);case 2:if(!(t=e.sent).error){e.next=6;break}return de({error:"Please check form for errors."}),e.abrupt("return",be()(t.error));case 6:de({success:"Deleted jump ".concat(u._id)}),r.push("/students/".concat(n._id));case 8:case"end":return e.stop()}},e,this)}))(),delete f.store.jumps,u._deleted=!0,e.next=6,l();case 6:t=e.sent,delete f.store.jumps,console.debug("reallyDeleteJump",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return 0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"b",onClick:function(){return r.push("/students/".concat(n._id))},children:"Back"},{id:"s",onClick:l,children:"Save Jump"},{id:"d",onClick:function(){if(f.store.deleteConfirmation)return m();f.store.deleteConfirmation=!0},deleteConfirmation:f.store.deleteConfirmation,children:"Delete Jump"}]),a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,{keyName:"ctrl+l,ctrl+b,ctrl+s,ctrl+d,esc",onKeyUp:function(e,t,r){if(t.stopPropagation(),"submit"===t.srcElement.type&&"enter"===e)return t.srcElement.children[0].click();switch(!0){case"ctrl+d"===e:var n=document.getElementById("d");n.focus(),n.click();break;case"esc"===e:document.querySelector("#PhraseCloud").classList.add("hidden");break;default:document.getElementById(e.match(/.$/)).click()}return!1}},a.a.createElement("div",{id:"Jump",className:"Content"},a.a.createElement("form",{onSubmit:l},a.a.createElement("fieldset",null,a.a.createElement("legend",null,"".concat(n.name," Dive Flow ").concat(u.diveFlow)),a.a.createElement("fieldset",{className:"inner"},a.a.createElement("legend",null,"Jump Details"),a.a.createElement("div",{className:"jump-details"},a.a.createElement("div",null,a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"number"},"Jump Number"),a.a.createElement("input",{type:"number",id:"number",value:u.number,className:"formField required",required:!0,disabled:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"diveFlow"},"Dive Flow"),a.a.createElement("input",{type:"number",id:"diveFlow",value:u.diveFlow,onChange:i,className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"date"},"Date"),a.a.createElement("input",{type:"date",id:"date",value:O()(u.date,"YYYY-MM-DD"),onChange:i,className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"instructor"},"Instructor"),a.a.createElement("select",{id:"instructor",value:u.instructor,onChange:i,className:"formField required",required:!0},a.a.createElement(Fe,{instructors:o,instructor:u.instructor})))),a.a.createElement("div",null,a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"aircraft"},"Aircraft"),a.a.createElement("select",{value:u.aircraft,id:"aircraft",onChange:i,className:"formField required",required:!0},a.a.createElement("option",{value:""}),a.a.createElement(Oe,{aircraft:c,selectedAircraft:u.aircraft}))),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"exitAltitude"},"Exit Altitude"),a.a.createElement("select",{value:u.exitAltitude,id:"exitAltitude",onChange:i,className:"formField required",required:!0},a.a.createElement(_e,null))),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"deploymentAltitude"},"Pull Altitude"),a.a.createElement("select",{value:u.deploymentAltitude,id:"deploymentAltitude",onChange:i,className:"formField required",required:!0},a.a.createElement(Ae,null))),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"freefallTime"},"Freefall Time"),a.a.createElement("input",{id:"freefallTime",value:"".concat(u.freefallTime," seconds"),onChange:i,className:"formField required",required:!0,disabled:!0}))))),a.a.createElement("fieldset",{className:"inner"},a.a.createElement("legend",null,"Freefall / Canopy"),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{onClick:s,onKeyDown:s,tabIndex:0,htmlFor:"exit"},"Exit"),a.a.createElement("textarea",{id:"exit",value:u.exit,onChange:i,className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{onClick:s,onKeyDown:s,tabIndex:0,htmlFor:"freefall"},"Freefall"),a.a.createElement("textarea",{id:"freefall",value:u.freefall,onChange:i,className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{onClick:s,onKeyDown:s,tabIndex:0,htmlFor:"canopy"},"Canopy"),a.a.createElement("textarea",{id:"canopy",value:u.canopy,onChange:i,className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"notes"},"Notes"),a.a.createElement("textarea",{id:"notes",value:u.notes,onChange:i,className:"formField"}))),a.a.createElement("input",{type:"submit",style:{display:"none"},tabIndex:-1}))))),a.a.createElement(xe,{setAttribute:i,store:f.store}))}),Fe=function(e){var t=e.instructors,r=e.instructor;return t.map(function(e){return e.name}).indexOf(r)<0&&t.push({name:r}),t.map(function(e,t){return a.a.createElement("option",{key:t,value:e.name},e.name)})},Oe=function(e){var t=e.aircraft,r=e.selectedAircraft;return t.map(function(e){return e.name}).indexOf(r)<0&&t.push({name:r}),t.map(function(e,t){return a.a.createElement("option",{key:t,value:e.name},e.name)})},_e=function(){for(var e=[],t=5e3;t<=17e3;t+=500)e.push(t);return e.reverse().map(function(e){return a.a.createElement("option",{key:e,value:e},e.toString().replace(/(\d{3}$)/,",$1"))})},Ae=function(){for(var e=[],t=3e3;t<=17e3;t+=500)e.push(t);return e.reverse().map(function(e){return a.a.createElement("option",{key:e,value:e},e.toString().replace(/(\d{3}$)/,",$1"))})};f.store.student=null,f.store.filteredStudents=[],f.store.instructors=[],f.store.aircraft=[],f.store.activeStudentRow=0;var De=Object(f.collect)(function(e){var t=f.store.headerButtons;return f.store.students=[],a.a.createElement(a.a.Fragment,null,a.a.createElement(L,{buttons:t}),a.a.createElement(Q.a,null,a.a.createElement(p.a,{exact:!0,path:"/students",component:G}),a.a.createElement(p.a,{path:"/students/:studentId/jump/:jumpId",component:je}),a.a.createElement(p.a,{path:"/students/:studentId/edit",component:ye}),a.a.createElement(p.a,{path:"/students/new",component:ye}),a.a.createElement(p.a,{path:"/students/:studentId",component:pe})))});f.store.filter="",f.store.activeRow=0;var Se=Object(f.collect)(function(e){var t=e.history,r=f.store.instructors;if(delete f.store.instructor,!r||0===r.length)return Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:t=e.sent,f.store.instructors=t;case 4:case"end":return e.stop()}},e,this)}))(),null;var n=r.length;return n>0&&f.store.activeRow===n&&(f.store.activeRow=0),n>0&&-1===f.store.activeRow&&(f.store.activeRow=n-1),0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"h",onClick:function(){return t.push("/")},children:"Home"},{id:"n",onClick:function(){t.push("/instructors/new")},children:"New Instructor"}]),a.a.createElement(T.a,{keyName:"down,j,up,k,enter,right,ctrl+h,ctrl+n",onKeyDown:function(e,n,a){if("submit"===n.srcElement.type&&"enter"===e)return!0;if(void 0!==n.srcElement.type)return!1;switch(!0){case["down","j"].includes(e):f.store.activeRow++;break;case["up","k"].includes(e):f.store.activeRow--;break;case["enter","right"].includes(e):t.push("/instructors/".concat(r[f.store.activeRow]._id));break;default:document.getElementById(e.match(/.$/)).click()}}},a.a.createElement("div",{className:"Content"},a.a.createElement("table",{id:"instructors"},a.a.createElement("caption",null,"Instructors"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Email"),a.a.createElement("th",null,"Phone"))),a.a.createElement("tbody",null,r.map(function(e,r){return a.a.createElement("tr",{key:r,className:r===f.store.activeRow?"active":"",onClick:function(){return function(e){t.push("/instructors/".concat(e._id))}(e)}},a.a.createElement("td",null,e.name),a.a.createElement("td",null,e.email),a.a.createElement("td",null,e.phone))})))))}),Ie=function(){var e=Object(b.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Be=r(149),Me=r.n(Be),Je=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.group("saveInstructor"),console.debug(t),!(r=Me()(t)).error){e.next=5;break}return e.abrupt("return",{error:r.error.details});case 5:if(!t._rev){e.next=9;break}return e.abrupt("return",x.get(t._id).then(function(e){return console.debug("get",e),t._rev=e._rev,x.put(t).then(function(e){return console.debug("put",e),console.groupEnd("saveInstructor"),e})}));case 9:return e.abrupt("return",x.put(t).then(function(e){return console.debug("saveInstructor new put",e),console.groupEnd("saveInstructor"),e}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Re={_id:Math.round(Math.random()*Math.pow(2,32)).toString(16),type:"instructor",name:"",email:"",phone:""};f.store.instructor=null;var Te=Object(f.collect)(function(e){var t=e.match,r=e.history,n=f.store.instructor;if(n||"/instructors/new"!==t.path||(f.store.instructor=Re),"/instructors/:id"!==t.path||n&&n._id===t.params.id||Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t.params.id);case 2:return e.abrupt("return",f.store.instructor=e.sent);case 3:case"end":return e.stop()}},e,this)}))(),!n)return!1;var u=function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(document.querySelector("input[type='submit']").click(),t.preventDefault()),Ee(),e.next=4,Je(n);case 4:if(!(a=e.sent).error){e.next=8;break}return de({error:"Please check form for errors."}),e.abrupt("return",be()(a.error));case 8:de({success:"Saved ".concat(n.name)}),delete f.store.instructors,r.push("/instructors");case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n._deleted=!0,e.next=3,Je(n);case 3:if(!(t=e.sent).error){e.next=6;break}return e.abrupt("return",de(t));case 6:delete f.store.instructors,de({success:"Deleted ".concat(n.name)}),r.push("/instructors");case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),c=function(e){var t=e.target,r=t.id,a=t.value;switch(r){case"phone":n[r]=he(a);break;default:n[r]=a}};return 0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"b",onClick:function(){return r.goBack(1)},children:"Back"},{id:"s",onClick:u,children:"Save Instructor"}]),t.params.id&&!f.store.headerButtons.find(function(e){return"d"===e.id})&&f.store.headerButtons.push({id:"d",onClick:function(){if(f.store.deleteConfirmation)return o();document.getElementById("d").focus(),f.store.deleteConfirmation=!0},children:"Delete Instructor"}),a.a.createElement(T.a,{keyName:"ctrl+b,ctrl+s,ctrl+d",onKeyDown:function(e,t,r){if("submit"===t.srcElement.type&&"enter"===e)return t.srcElement.children[0].click();document.getElementById(e.match(/.$/)).click()}},a.a.createElement("div",{className:"Content"},a.a.createElement("form",{onSubmit:u},a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Editing"," ",n.name?n.name:"New Instructor (id:".concat(n._id,")")),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"name"},"Name"),a.a.createElement("input",{id:"name",onChange:c,value:n.name,placeholder:"Full Name",className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"email"},"Email"),a.a.createElement("input",{id:"email",onChange:c,value:n.email,type:"email",placeholder:"email@domain.com",className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"phone"},"Phone"),a.a.createElement("input",{id:"phone",onChange:c,value:n.phone,type:"tel",placeholder:"123-456-7890",pattern:"\\d{3}-\\d{3}-\\d{4}",className:"formField required",required:!0}))),a.a.createElement("input",{type:"submit",style:{display:"none"}}))))}),Pe=Object(f.collect)(function(e){var t=f.store.headerButtons;return a.a.createElement(a.a.Fragment,null,a.a.createElement(L,{buttons:t}),a.a.createElement(Q.a,null,a.a.createElement(p.a,{exact:!0,path:"/instructors",component:Se}),a.a.createElement(p.a,{path:"/instructors/new",component:Te}),a.a.createElement(p.a,{path:"/instructors/:id",component:Te})))});f.store.activeAircraftRow=0;var Ke=Object(f.collect)(function(e){var t=e.history,r=f.store.aircraft;if(delete f.store.currentAircraft,!r||0===r.length)return Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,f.store.aircraft=t;case 4:case"end":return e.stop()}},e,this)}))(),null;var n=r.length;return n>0&&f.store.activeAircraftRow===n&&(f.store.activeAircraftRow=0),n>0&&-1===f.store.activeAircraftRow&&(f.store.activeAircraftRow=n-1),0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"h",onClick:function(){return t.push("/")},children:"Home"},{id:"n",onClick:function(){t.push("/aircraft/new")},children:"New aircraft"}]),a.a.createElement(T.a,{keyName:"down,j,up,k,enter,right,ctrl+h,ctrl+n",onKeyDown:function(e,n,a){if("submit"===n.srcElement.type&&"enter"===e)return!0;if(void 0!==n.srcElement.type)return!1;switch(!0){case["down","j"].includes(e):f.store.activeAircraftRow++;break;case["up","k"].includes(e):f.store.activeAircraftRow--;break;case["enter","right"].includes(e):t.push("/aircraft/".concat(r[f.store.activeAircraftRow].id));break;default:document.getElementById(e.match(/.$/)).click()}}},a.a.createElement("div",{className:"Content"},a.a.createElement("table",{id:"aircraft"},a.a.createElement("caption",null,"Aircraft"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Tail #"))),a.a.createElement("tbody",null,r.map(function(e,r){return a.a.createElement("tr",{key:r,className:r===f.store.activeAircraftRow?"active":"",onClick:function(){return function(e){t.push("/aircraft/".concat(e._id))}(e)}},a.a.createElement("td",null,e.name),a.a.createElement("td",null,e.tailNumber))})))))}),Le=function(){var e=Object(b.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),$e=r(150),Ve=r.n($e),Qe=function(){var e=Object(b.a)(v.a.mark(function e(t){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.group("saveAircraft"),console.log(t),!(r=Ve()(t)).error){e.next=5;break}return e.abrupt("return",{error:r.error.details});case 5:if(!t._rev){e.next=9;break}return e.abrupt("return",x.get(t._id).then(function(e){return console.debug("get",e),t._rev=e._rev,x.put(t).then(function(e){return console.debug("put",e),console.groupEnd("saveAircraft"),e})}));case 9:return e.abrupt("return",x.put(t).then(function(e){return console.debug("saveAircraft new put",e),console.groupEnd("saveAircraft"),e}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ue={_id:Math.round(Math.random()*Math.pow(2,32)).toString(16),type:"aircraft",name:"",tailNumber:""};f.store.currentAircraft=null;var ze=Object(f.collect)(function(e){var t=e.match,r=e.history,n=f.store.currentAircraft;if(n||"/aircraft/new"!==t.path||(f.store.currentAircraft=Ue),"/aircraft/:id"!==t.path||n&&n._id===t.params.id||Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(t.params.id);case 2:return e.abrupt("return",f.store.currentAircraft=e.sent);case 3:case"end":return e.stop()}},e,this)}))(),!n)return!1;var u=function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(document.querySelector("input[type='submit']").click(),t.preventDefault()),Ee(),e.next=4,Qe(n);case 4:if(!(a=e.sent).error){e.next=8;break}return de({error:"Please check form for errors."}),e.abrupt("return",be()(a.error));case 8:de({success:"Saved ".concat(n.name)}),delete f.store.aircraft,r.push("/aircraft");case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n._deleted=!0,e.next=3,Qe(n);case 3:if(!(t=e.sent).error){e.next=6;break}return e.abrupt("return",de(t));case 6:delete f.store.aircraft,de({success:"Deleted ".concat(n.name)}),r.push("/aircraft");case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),c=function(e){var t=e.target,r=t.id,a=t.value;n[r]=a};return 0===f.store.headerButtons.length&&(f.store.headerButtons=[{id:"b",onClick:function(){return r.goBack(1)},children:"Back"},{id:"s",onClick:u,children:"Save Aircraft"}]),t.params.id&&!f.store.headerButtons.find(function(e){return"d"===e.id})&&f.store.headerButtons.push({id:"d",onClick:function(){if(f.store.deleteConfirmation)return o();document.getElementById("d").focus(),f.store.deleteConfirmation=!0},children:"Delete Aircraft"}),a.a.createElement(T.a,{keyName:"ctrl+b,ctrl+s,ctrl+d",onKeyDown:function(e,t,r){if("submit"===t.srcElement.type&&"enter"===e)return t.srcElement.children[0].click();document.getElementById(e.match(/.$/)).click()}},a.a.createElement("div",{className:"Content"},a.a.createElement("form",{onSubmit:u},a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Editing"," ",n.name?n.name:"New Aircraft (id:".concat(n._id,")")),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"name"},"Name"),a.a.createElement("input",{id:"name",onChange:c,value:n.name,placeholder:"Full Name",className:"formField required",required:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",{htmlFor:"email"},"Tail Number"),a.a.createElement("input",{id:"tailNumber",onChange:c,value:n.tailNumber,placeholder:"N 1234Z",className:"formField required",required:!0}))),a.a.createElement("input",{type:"submit",style:{display:"none"}}))))}),Ze=Object(f.collect)(function(e){var t=f.store.headerButtons;return a.a.createElement(a.a.Fragment,null,a.a.createElement(L,{buttons:t}),a.a.createElement(Q.a,null,a.a.createElement(p.a,{exact:!0,path:"/aircraft",component:Ke}),a.a.createElement(p.a,{path:"/aircraft/new",component:ze}),a.a.createElement(p.a,{path:"/aircraft/:id",component:ze})))}),He=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){R()}},{key:"render",value:function(){return f.store.flash=f.store.flash||{},f.store.headerButtons=[],f.store.deleteConfirmation=!1,a.a.createElement("div",{className:"App"},a.a.createElement(p.a,{exact:!0,path:"/",component:V}),a.a.createElement(p.a,{path:"/students",component:De}),a.a.createElement(p.a,{path:"/instructors",component:Pe}),a.a.createElement(p.a,{path:"/aircraft",component:Ze}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,{basename:"/stp-logbook"},a.a.createElement(He,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},146:function(e,t,r){var n=r(41),a=n.object().keys({_id:n.string().alphanum().required(),_rev:n.string(),type:n.string().required(),name:n.string().required(),email:n.string().email().required(),phone:n.string().replace(/[^\d]/g,"").length(10).required(),instructor:n.string().required(),previousJumps:n.number().integer().min(0).required(),jumps:n.array().required()});e.exports=function(e){return n.validate(e,a,{abortEarly:!1})}},147:function(e,t,r){var n=r(41),a=n.object().keys({_id:n.string().alphanum().required(),_rev:n.string(),_deleted:n.boolean(),type:n.string().required(),studentId:n.string().alphanum().required(),number:n.number().min(1).required(),diveFlow:n.number().min(1).required(),date:n.date().iso().required(),instructor:n.string().required(),aircraft:n.string().required(),exitAltitude:n.number().required(),deploymentAltitude:n.number().required(),freefallTime:n.number().required(),exit:n.string(),freefall:n.string(),canopy:n.string(),notes:n.string()});e.exports=function(e){try{return n.validate(e,a,{abortEarly:!1})}catch(t){console.error(t)}}},149:function(e,t,r){var n=r(41),a=n.object().keys({_id:n.string().alphanum().required(),_rev:n.string(),_deleted:n.boolean(),type:n.string().required(),name:n.string().required(),email:n.string().email().required(),phone:n.string().replace(/[^\d]/g,"").length(10).required()});e.exports=function(e){return n.validate(e,a,{abortEarly:!1})}},150:function(e,t,r){var n=r(41),a=n.object().keys({_id:n.string().alphanum().required(),_rev:n.string(),_deleted:n.boolean(),type:n.string().required(),name:n.string().required(),tailNumber:n.string().required()});e.exports=function(e){return n.validate(e,a,{abortEarly:!1})}},155:function(e,t,r){e.exports=r(1365)},160:function(e,t,r){},32:function(e,t){e.exports=function(e){return e.map(function(e,t){try{return document.getElementById(e.context.key).classList.add("error"),null}catch(r){console.error(r),console.log(e.context.key)}return null}),document.querySelectorAll(".formField.error").item(0).focus(),null}},51:function(e){e.exports={exit:{a:"Voluptatum est assumenda ut eum aliquam.",b:"Omnis velit incidunt ipsa quis quisquam ad veniam voluptatum hic.",c:"Vel quibusdam officiis vel eos corporis qui eveniet maxime praesentium.",d:"Voluptatum dolore reprehenderit id tenetur magnam excepturi impedit aut.",e:"Provident iste et omnis dolore non ratione delectus qui saepe.",f:"Eum neque ipsa maxime.",g:"Quasi dolorum eum natus suscipit.",h:"Qui necessitatibus aliquam et iste ut mollitia nemo.",i:"Aliquam autem qui quis dolorum nemo et.",j:"Voluptatibus cum aliquid et.",k:"Et consequatur est laudantium labore eaque sit qui et ex.",l:"Occaecati et quia.",m:"Consequatur ut et ducimus accusantium qui omnis voluptatem iste culpa.",n:"Magni ad velit ea facere nihil.",o:"Qui et voluptatem.",p:"Qui tenetur in veniam eaque odit ad quod.",q:"Voluptatum ipsum numquam omnis quidem dolorem assumenda suscipit provident quo.",r:"Est quo iusto quod totam sed ullam enim iure magnam.",s:"Est quidem non quos enim explicabo et quod quibusdam.",t:"Ex fuga repudiandae est mollitia et qui ducimus.",u:"Magnam architecto voluptatem sit et voluptatum pariatur consequatur.",v:"Minus et sunt harum.",w:"Consectetur consectetur quia veniam optio molestiae dolor voluptatibus culpa praesentium.",x:"Reiciendis quos quo eum alias.",y:"Ut enim molestias ratione odio qui aut nesciunt consequuntur ullam.",z:"Sed quasi dolore libero cumque quia dolorem."},freefall:{a:"Amet nostrum cum molestiae ut inventore.",b:"Non veniam corporis laudantium est rem.",c:"Ut minus sit unde voluptas illum quo perspiciatis laudantium.",d:"In ducimus est maiores accusamus.",e:"Nulla fuga quisquam dolorem consequuntur velit quibusdam perferendis.",f:"Aut et placeat aut incidunt eum soluta.",g:"Minus aut dolores asperiores minus quasi nisi.",h:"Nam alias veritatis deserunt non iure unde reprehenderit aut sunt.",i:"Officia distinctio id id inventore tempora consequatur maxime.",j:"Dolorum et et rem voluptatem.",k:"Repellendus optio id voluptatem doloremque repudiandae qui odit quas aspernatur.",l:"Repudiandae amet eveniet facere.",m:"Cupiditate excepturi dolor rerum aut culpa saepe.",n:"Labore et suscipit soluta id quibusdam illum consequatur tempora.",o:"Optio ut vitae.",p:"Facere inventore nisi esse accusamus quaerat et sint eos.",q:"Culpa reprehenderit ea rerum aut numquam voluptatem eligendi sit saepe.",r:"Qui et unde.",s:"Quis aut assumenda.",t:"Ratione rerum numquam dolores hic veritatis beatae nulla.",u:"Vitae et impedit.",v:"Impedit iure veritatis facilis veritatis.",w:"Totam dolore non perferendis sed iusto unde omnis fugiat sit.",x:"Libero corporis eligendi dolorem voluptatum.",y:"Quidem at et.",z:"Totam cumque magnam qui deserunt doloremque quisquam vel id."},canopy:{a:"Quia est consequuntur et eligendi sint qui.",b:"Velit molestias id.",c:"Omnis officiis unde corporis vitae eveniet.",d:"Placeat rem quos voluptatem expedita.",e:"Repudiandae iste reiciendis laudantium et.",f:"Temporibus ut repudiandae ea nostrum quibusdam consequatur veniam sint.",g:"Voluptatem sed quis vitae vero.",h:"Laudantium earum exercitationem sit quisquam iure et voluptatem.",i:"Et saepe praesentium consequatur.",j:"Ab et praesentium ad eos voluptas at eius at sed.",k:"Id labore qui aut odit.",l:"Exercitationem quis nisi rerum unde sunt voluptatem velit ea.",m:"Error ut et nesciunt maxime aut est ab tenetur eos.",n:"Atque et aspernatur error amet architecto.",o:"Enim ut odio error aliquid dolor.",p:"Natus similique quae.",q:"Tenetur atque qui laborum veritatis.",r:"Fuga id voluptates doloremque minima deserunt.",s:"Dolores repellat libero ea.",t:"Vero numquam quos repellat laborum et aliquam veniam sunt ut.",u:"Porro quae sunt doloribus et.",v:"Tenetur et in.",w:"Voluptatum repellat aspernatur in nobis omnis.",x:"Error alias autem.",y:"Vero quod facilis rerum numquam.",z:"Sit nihil architecto aut excepturi beatae nostrum illo."}}}},[[155,2,1]]]);
//# sourceMappingURL=main.dcb5d7f9.chunk.js.map